<div class="container">
  <div class="content-action">
    <div class="title"><a [routerLink]="['../../../all-clients']">{{'Clients.Clients' | translate}}</a> / {{clientId}}
      :{{'Clients.PaymentSettings' | translate}}</div>
    <button mat-stroked-button class="edit-btn" (click)="isEdit = true">{{'Common.Edit' | translate}}</button>
  </div>

  <div class="content-edit">
    <form class="grid-edit" [class.can-edit] ="isEdit" [formGroup]="formGroup">
      <div>
        <div class="first-hand">{{'Clients.MaxDepositAmount' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxDepositAmount}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxDepositAmount'">
            @if (errorControls['MaxDepositAmount'].touched && errorControls['MaxDepositAmount'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxDepositAmountIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Clients.MaxWithdrawAmount' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxWithdrawAmount}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxWithdrawAmount'">
            @if (errorControls['MaxWithdrawAmount'].touched && errorControls['MaxWithdrawAmount'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxWithdrawAmountIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }

        </div>
      </div>
      
      <div>
        <div class="first-hand">{{'Clients.MaxDepositsCountPerDay' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxDepositsCountPerDay}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxDepositsCountPerDay'">
            @if (errorControls['MaxDepositsCountPerDay'].touched && errorControls['MaxDepositsCountPerDay'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxDepositsCountPerDayIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Clients.MaxWithdrawCountPerDay' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxWithdrawCountPerDay}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxWithdrawCountPerDay'">
            @if (errorControls['MaxWithdrawCountPerDay'].touched && errorControls['MaxWithdrawCountPerDay'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxWithdrawCountPerDayIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Clients.MaxTotalWithdrawsAmountPerDay' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalWithdrawsAmountPerDay}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxTotalWithdrawsAmountPerDay'">
            @if (errorControls['MaxTotalWithdrawsAmountPerDay'].touched && errorControls['MaxTotalWithdrawsAmountPerDay'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxTotalWithdrawsAmountPerDayIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      <!-- <div>
        <div class="first-hand">{{'Clients.MaxTotalDepositsAmountPerDay' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalWithdrawsAmountPerWeek}}</div>
        <div class="form-field form-input">

          <mat-form-field> 
            <input matInput type="number" [formControlName]="'MaxTotalDepositsAmountPerDay'">
            <mat-error
              *ngIf="errorControls['MaxTotalDepositsAmountPerDay'].touched && errorControls['MaxTotalDepositsAmountPerDay'].hasError('required')">
              {{'Clients.MaxTotalDepositsAmountPerDayIs' | translate}} {{'Errors.Required' | translate}}
            </mat-error>
          </mat-form-field>
        </div>
      </div> -->

      <!-- <div>
        <div class="first-hand">{{'Clients.MaxTotalWithdrawsAmountPerWeek' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalDepositsAmountPerDay}}</div>
        <div class="form-field form-input">
          <mat-form-field>
            <input matInput type="number" [formControlName]="'MaxTotalWithdrawsAmountPerWeek'">
            <mat-error
              *ngIf="errorControls['MaxTotalWithdrawsAmountPerWeek'].touched && errorControls['MaxTotalWithdrawsAmountPerWeek'].hasError('required')">
              {{'Clients.MaxTotalWithdrawsAmountPerWeekIs' | translate}} {{'Errors.Required' | translate}}
            </mat-error>
          </mat-form-field>
        </div>
      </div> -->

      <!-- <div>
        <div class="first-hand">{{'Clients.MaxTotalDepositsAmountPerMonth' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalDepositsAmountPerMonth}}</div>
        <div class="form-field form-input">
          <mat-form-field>
            <input matInput type="number" [formControlName]="'MaxTotalDepositsAmountPerMonth'">
            <mat-error
              *ngIf="errorControls['MaxTotalDepositsAmountPerMonth'].touched && errorControls['MaxTotalDepositsAmountPerMonth'].hasError('required')">
              {{'Clients.MaxTotalDepositsAmountPerMonthIs' | translate}} {{'Errors.Required' | translate}}
            </mat-error>
          </mat-form-field>
        </div>
      </div> -->
      <div>
        <div class="first-hand">{{'Clients.MaxTotalDepositsAmountPerWeek' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalDepositsAmountPerWeek}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxTotalDepositsAmountPerWeek'">
            @if (errorControls['MaxTotalDepositsAmountPerWeek'].touched && errorControls['MaxTotalDepositsAmountPerWeek'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxTotalDepositsAmountPerWeekIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      
      <div>
        <div class="first-hand">{{'Clients.MaxTotalWithdrawsAmountPerMonth' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.MaxTotalWithdrawsAmountPerMonth}}</div>
        <div class="form-field form-input">
            <input matInput type="number" [formControlName]="'MaxTotalWithdrawsAmountPerMonth'">
            @if (errorControls['MaxTotalWithdrawsAmountPerMonth'].touched && errorControls['MaxTotalWithdrawsAmountPerMonth'].hasError('required')) {
              <mat-error>
                {{'Clients.MaxTotalWithdrawsAmountPerMonthIs' | translate}} {{'Errors.Required' | translate}}
              </mat-error>
            }
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Clients.StartTime' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.StartTime | date:'dd/MM/yyyy HH:MM'}}</div>
        <div class="form-field form-calendar form-calendar-edit">
          <input matInput [matDatepicker]="picker" [formControlName]="'StartTime'">
          <mat-datepicker-toggle matSuffix [for]="picker">
            <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true"></div>
          </mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.FinishTime' | translate}}</div>
        <div class="second-hand">{{paymentLimits?.FinishTime | date:'dd/MM/yyyy HH:MM'}}</div>
        <div class="form-field form-calendar form-calendar-edit">
          <input matInput [matDatepicker]="picker1" [formControlName]="'EndTime'">
          <mat-datepicker-toggle matSuffix [for]="picker1">
            <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true"></div>
          </mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </div>
      </div>

      <div class="form-actions">
        @if (isEdit) {
          <div class="actions">
            <button mat-stroked-button class="mat-cancel-btn" (click)="isEdit = false;">{{'Common.Cancel' | translate}}</button>
            <button mat-stroked-button class="mat-btn" type="submit" (click)="onSubmit()">{{'Common.Save' | translate}}</button>
          </div>
        }
      </div>

    </form>
  </div>
</div>

<div class="container">
  <div class="content-action">
    <div class="title">{{'Clients.BlockedPayments' | translate}}</div>
    <button mat-stroked-button class="mat-btn" [class.disabled]="!selected" (click)="removeBlockedPayments()">{{'Clients.RemoveBlockedPayment' | translate}}</button>
    <button mat-stroked-button class="mat-btn" (click)="addBlockedPayments()">{{'Clients.AddBlockedPayment' | translate}}</button>
  </div>

  <div class="grid-content">
    <ag-grid-angular
      id="sessions"
      #agGrid
      class="ag-theme-balham"
      [headerHeight]="33"
      [rowHeight]="42"
      [rowData]="rowData"
      [rowModelType]="rowModelType"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [cacheBlockSize]="cacheBlockSize"
      [suppressCopyRowsToClipboard]="true"
      (gridReady)="onGridReady($event)"
      (rowSelected)="onRowSelected($event)"
      [ensureDomOrder]="true"
      [enableCellTextSelection]="true"
      [getContextMenuItems]="getContextMenuItems"
      rowSelection="single">
    </ag-grid-angular>
  </div>

</div>


